<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>StudentNotify</title>
  <link rel="manifest" href="/manifest.json">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="app">
    <!-- Login -->
    <div id="login-screen" class="screen center">
      <div class="card auth-card">
        <h1 class="brand">StudentNotify</h1>
        <p class="muted">Система информирования студентов</p>
        <div class="form">
          <label>Логин</label>
          <input id="login" type="text" placeholder="Введите логин" />
          <label>Пароль</label>
          <input id="password" type="password" placeholder="Введите пароль" />
          <button class="btn primary" onclick="login()" style="margin-top:14px">Войти</button>
        </div>
      </div>
    </div>

    <!-- Main app -->
    <div id="main-app" class="screen hidden">
      <header class="topbar">
        <div class="container bar-grid">
          <div class="brand-area">
            <div class="brand">StudentNotify</div>
          </div>
          <nav class="tabs" id="tabs">
            <button class="tab active" data-tab="notifications" onclick="showTab('notifications')">Уведомления</button>
            <button class="tab" data-tab="filters" onclick="showTab('filters')">Фильтры</button>
            <button class="tab" data-tab="settings" onclick="showTab('settings')">Настройки</button>
            <button class="tab hidden" data-tab="admin" id="admin-tab" onclick="showTab('admin')">Админ</button>
          </nav>
          <div class="user-area">
            <span id="user-info" class="user-info"></span>
            <button class="btn outline small" onclick="logout()">Выйти</button>
          </div>
        </div>
      </header>

      <main class="container main-grid">
        <!-- Notifications tab -->
        <section id="tab-notifications" class="tab-panel">
          <div class="panel-header">
            <h2>Уведомления</h2>
            <div class="panel-actions">
              <input id="search-input" class="search" placeholder="Поиск по заголовку, содержанию или тегам..." oninput="onSearchInput(event)" />
            </div>
          </div>
          <div class="notif-files"></div>

          <div id="notifications-container" class="notifications-list"></div>
          
</div>

        </section>

        <!-- Filters tab -->
        <section id="tab-filters" class="tab-panel hidden">
          <h2>Фильтры</h2>
          <div class="filters-card card">
            <label>Категория</label>
            <select id="filter-category" onchange="applyFilterChange()">
              <option value="all">все</option>
              <option value="общее">общее</option>
              <option value="расписание">расписание</option>
              <option value="учеба">учеба</option>
              <option value="мероприятия">мероприятия</option>
              <option value="техническое">техническое</option>
              <option value="срочное">срочное</option>
            </select>

            <label>Важность</label>
            <select id="filter-importance" onchange="applyFilterChange()">
              <option value="all">Все</option>
              <option value="important">Только важные</option>
              <option value="normal">Обычные</option>
            </select>

            <label>Приоритет</label>
            <select id="filter-priority" onchange="applyFilterChange()">
              <option value="all">Все</option>
              <option value="critical">Критический</option>
              <option value="high">Высокий</option>
              <option value="medium">Средний</option>
              <option value="low">Низкий</option>
            </select>

            <div style="margin-top:12px">
              <button class="btn primary" onclick="applyFilterChange()">Применить</button>
            </div>
          </div>
        </section>

        <!-- Settings tab -->
        <section id="tab-settings" class="tab-panel hidden">
          <h2>Настройки уведомлений</h2>
          <div class="settings-card card">
            <div class="row">
              <div>
                <p class="muted">Push-уведомления в этом браузере</p>
                <div id="push-status" class="push-status">
                  <span id="push-status-dot" class="dot offline"></span>
                  <span id="push-status-text">Проверка...</span>
                </div>
              </div>
              <div class="actions">
                <button class="btn primary" id="push-toggle-btn" onclick="togglePush()">Включить уведомления</button>
                <button class="btn outline" onclick="openNotificationPermission()" style="margin-top:12px">Настройки браузера</button>
              </div>
            </div>
            <div id="push-details" class="muted small" style="margin-top:10px">Подписка хранится на сервере и связана с вашим аккаунтом.</div>
          </div>
        </section>

        <!-- Admin tab -->
        <section id="tab-admin" class="tab-panel hidden">
  <h2>Панель администратора</h2>

  <div class="admin-block">
    <h3>Создать уведомление</h3>

    <div class="admin-grid">

      <div class="admin-form-group">
        <label>Заголовок</label>
        <input id="notification-title" type="text">
      </div>

      <div class="admin-form-group admin-grid-full">
        <label>Содержание</label>
        <textarea id="notification-content"></textarea>
      </div>

      <div class="admin-form-group">
        <label>Приоритет</label>
        <select id="notification-priority">
          <option value="critical">Критический</option>
          <option value="high">Высокий</option>
          <option value="medium">Средний</option>
          <option value="low">Низкий</option>
        </select>
      </div>

      <div class="admin-form-group">
        <label>Категория</label>
        <select id="notification-category">
          <option value="общее">Общее</option>
          <option value="учеба">Учёба</option>
          <option value="расписание">Расписание</option>
          <option value="мероприятия">Мероприятия</option>
          <option value="техническое">Техническое</option>
          <option value="срочное">Срочное</option>
        </select>
      </div>

      <div class="admin-form-group admin-grid-full">
        <label>Файлы (можно несколько)</label>
        <input type="file" id="notification-files" multiple>
      </div>

      <div class="admin-form-group">
        <label><input type="checkbox" id="notification-important"> Важное</label>
      </div>

      <div class="admin-form-group">
        <label><input type="checkbox" id="notification-send-push"> Отправить Push</label>
      </div>

      <div class="admin-form-group admin-grid-full">
        <button class="btn primary" onclick="createNotification()">Опубликовать</button>
      </div>

    </div>
  </div>

  <div class="admin-block">
    <h3>Отправить Push вручную</h3>

    <div class="admin-grid">

      <div class="admin-form-group">
        <label>Заголовок</label>
        <input id="push-title" type="text">
      </div>

      <div class="admin-form-group admin-grid-full">
        <label>Сообщение</label>
        <input id="push-message" type="text">
      </div>

      <div class="admin-form-group">
        <label>Цель</label>
        <select id="push-target">
          <option value="all">Все</option>
          <option value="students">Только студенты</option>
        </select>
      </div>

      <div class="admin-form-group admin-grid-full">
        <button class="btn primary" onclick="sendAdminPush()">Отправить</button>
      </div>

    </div>
  </div>

</section>



  <script src="app.js"></script>
</body>
</html>
